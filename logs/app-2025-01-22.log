2025-01-22 21:39:10 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-01-22.log, 控制台: True
2025-01-22 21:39:10 [INFO] __main__: 正在启动服务...
2025-01-22 21:39:10 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-01-22 21:39:10 [INFO] __main__: FastAPI服务已启动
2025-01-22 21:39:10 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-01-22 21:39:10 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-01-22 21:39:10 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [97461] using StatReload
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] self.run()
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] return future.result()
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] config.load()
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 28, in <module>
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 21, in __init__
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] self.chat_client = Client("https://63e9cf37a8d05f9e2b.gradio.live/")
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Err] ValueError: Could not fetch config for https://63e9cf37a8d05f9e2b.gradio.live/
2025-01-22 21:39:12 [INFO] __main__: [FastAPI-Out] Loaded as API: https://63e9cf37a8d05f9e2b.gradio.live/ ✔
2025-01-22 21:40:54 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-01-22 21:40:54 [INFO] __main__: 正在清理资源...
2025-01-22 21:40:54 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-01-22 21:40:54 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [97461]
2025-01-22 21:40:54 [INFO] __main__: FastAPI 服务已关闭
2025-01-22 21:40:56 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-01-22.log, 控制台: True
2025-01-22 21:40:56 [INFO] __main__: 正在启动服务...
2025-01-22 21:40:56 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-01-22 21:40:56 [INFO] __main__: FastAPI服务已启动
2025-01-22 21:40:56 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-01-22 21:40:56 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-01-22 21:40:56 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [98395] using StatReload
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] self.run()
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] return future.result()
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] config.load()
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 28, in <module>
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 21, in __init__
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] self.chat_client = Client("https://63e9cf37a8d05f9e2b.gradio.live/")
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Err] ValueError: Could not fetch config for https://63e9cf37a8d05f9e2b.gradio.live/
2025-01-22 21:40:58 [INFO] __main__: [FastAPI-Out] Loaded as API: https://63e9cf37a8d05f9e2b.gradio.live/ ✔
2025-01-22 21:42:43 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-01-22 21:42:43 [INFO] __main__: 正在清理资源...
2025-01-22 21:42:43 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-01-22 21:42:43 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [98395]
2025-01-22 21:42:43 [INFO] __main__: FastAPI 服务已关闭
