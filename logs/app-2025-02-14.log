2025-02-14 22:27:06 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:27:06 [INFO] __main__: 正在启动服务...
2025-02-14 22:27:06 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:27:06 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:27:06 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:27:06 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:27:06 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:27:06 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [9950] using StatReload
2025-02-14 22:27:07 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:27:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:27:07 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:27:12 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:27:12 [INFO] __main__: [Gradio-Err] 2025-02-14 22:27:12 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:27:12 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:27:12 [INFO] __main__: [Gradio-Err] 2025-02-14 22:27:12 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:27:16 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:27:16 [INFO] __main__: [Gradio-Err] 2025-02-14 22:27:16 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:27:19 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:27:19 [INFO] src.web_app: 启用HTTPS支持
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] 2025-02-14 22:27:19 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] 2025-02-14 22:27:19 [INFO] src.web_app: 启用HTTPS支持
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] File "<string>", line 15, in <module>
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 604, in launch
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] self.interface.launch(**launch_kwargs)
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Err] AttributeError: 'NoneType' object has no attribute 'launch'
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:27:19 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:27:20 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:27:20 [INFO] __main__: 正在清理资源...
2025-02-14 22:27:20 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:27:25 [WARNING] __main__: FastAPI 服务未能在5秒内关闭，强制结束
2025-02-14 22:27:25 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:27:25 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:27:25 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:28:37 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:28:37 [INFO] __main__: 正在启动服务...
2025-02-14 22:28:37 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:28:37 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:28:37 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:28:37 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:28:37 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:28:37 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [10172] using StatReload
2025-02-14 22:28:38 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:28:38 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:38 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:28:43 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:28:43 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:43 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:28:44 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:28:44 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:44 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:28:51 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:28:51 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:51 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] yield
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 236, in handle_request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] resp = self._pool.handle_request(req)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] raise exc from None
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] response = connection.handle_request(
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http_proxy.py", line 316, in handle_request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] stream = stream.start_tls(**kwargs)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 376, in start_tls
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return self._stream.start_tls(ssl_context, server_hostname, timeout)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_backends/sync.py", line 154, in start_tls
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] with map_exceptions(exc_map):
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] self.gen.throw(value)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] raise to_exc(exc) from exc
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] httpcore.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] The above exception was the direct cause of the following exception:
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] self.run()
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return future.result()
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] config.load()
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 29, in <module>
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 33, in __init__
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] self.voice_client = Client(
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 180, in __init__
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] self._info = self._get_api_info()
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 565, in _get_api_info
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] r = httpx.get(
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 210, in get
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return request(
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 118, in request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return client.request(
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 837, in request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] return self.send(request, auth=auth, follow_redirects=follow_redirects)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 926, in send
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] response = self._send_handling_auth(
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 954, in _send_handling_auth
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] response = self._send_handling_redirects(
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] response = self._send_single_request(request)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 1027, in _send_single_request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] response = transport.handle_request(request)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 235, in handle_request
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] with map_httpcore_exceptions():
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] self.gen.throw(value)
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] raise mapped_exc(message) from exc
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Err] httpx.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:28:54 [INFO] __main__: [FastAPI-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:28:59 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:59 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:28:59 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:59 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:28:59 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:59 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:28:59 [INFO] src.web_app: 启用HTTPS支持
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:59 [INFO] src.web_app: 启用HTTPS支持
2025-02-14 22:28:59 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:59 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:28:59 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:59 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] Exception in thread Thread-11 (run):
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/threading.py", line 1075, in _bootstrap_inner
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] self.run()
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/threading.py", line 1012, in run
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] return runner.run(main)
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] return self._loop.run_until_complete(task)
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] return future.result()
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] await self._serve(sockets)
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] config.load()
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 401, in load
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] self.ssl: ssl.SSLContext | None = create_ssl_context(
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 114, in create_ssl_context
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] ctx.load_cert_chain(certfile, keyfile, get_password)
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] FileNotFoundError: [Errno 2] No such file or directory
2025-02-14 22:28:59 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:28:59 [INFO] __main__: [Gradio-Err] 2025-02-14 22:28:59 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] File "<string>", line 15, in <module>
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 608, in launch
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] self.interface.launch(**launch_kwargs)
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio/blocks.py", line 2515, in launch
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] ) = http_server.start_server(
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio/http_server.py", line 156, in start_server
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] raise OSError(
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Err] OSError: Cannot find empty port in range: 7860-7860. You can specify a different port by setting the GRADIO_SERVER_PORT environment variable or passing the `server_port` parameter to `launch()`.
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:29:04 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:29:04 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:29:04 [INFO] __main__: 正在清理资源...
2025-02-14 22:29:04 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:29:04 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [10172]
2025-02-14 22:29:04 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:29:04 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:29:04 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:30:17 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:30:17 [INFO] __main__: 正在启动服务...
2025-02-14 22:30:17 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:30:17 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:30:17 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:30:17 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:30:17 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:30:17 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [10372] using StatReload
2025-02-14 22:30:18 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:30:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:18 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:30:26 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:30:26 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:26 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:30:26 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:30:26 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:26 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:30:30 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:30:30 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:30 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:30:37 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:37 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:30:37 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:30:37 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:37 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:37 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:30:37 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:37 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] File "<string>", line 15, in <module>
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 619, in launch
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] self.interface.launch(**launch_kwargs)
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] TypeError: Blocks.launch() got an unexpected keyword argument 'server_port_range'
2025-02-14 22:30:37 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:37 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:30:37 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:30:37 [INFO] __main__: [Gradio-Err] 2025-02-14 22:30:37 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:30:39 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:30:39 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:30:39 [INFO] __main__: [Gradio-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] yield
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 236, in handle_request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] resp = self._pool.handle_request(req)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] raise exc from None
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] response = connection.handle_request(
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http_proxy.py", line 316, in handle_request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] stream = stream.start_tls(**kwargs)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 376, in start_tls
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return self._stream.start_tls(ssl_context, server_hostname, timeout)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_backends/sync.py", line 154, in start_tls
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] with map_exceptions(exc_map):
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] self.gen.throw(value)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] raise to_exc(exc) from exc
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] httpcore.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] The above exception was the direct cause of the following exception:
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] self.run()
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return future.result()
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] config.load()
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/workout.py", line 28, in <module>
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] self.chat_client = Client(
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 860, in _get_config
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] r = httpx.get(
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 210, in get
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return request(
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 118, in request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return client.request(
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 837, in request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] return self.send(request, auth=auth, follow_redirects=follow_redirects)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 926, in send
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] response = self._send_handling_auth(
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 954, in _send_handling_auth
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] response = self._send_handling_redirects(
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] response = self._send_single_request(request)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 1027, in _send_single_request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] response = transport.handle_request(request)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 235, in handle_request
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] with map_httpcore_exceptions():
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] self.gen.throw(value)
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] raise mapped_exc(message) from exc
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Err] httpx.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:30:39 [INFO] __main__: [FastAPI-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:30:40 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:30:40 [INFO] __main__: 正在清理资源...
2025-02-14 22:30:40 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:30:40 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [10372]
2025-02-14 22:30:40 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:30:40 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:30:40 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:31:59 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:31:59 [INFO] __main__: 正在启动服务...
2025-02-14 22:31:59 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:31:59 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:31:59 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:31:59 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:31:59 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:31:59 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [10592] using StatReload
2025-02-14 22:32:00 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:32:00 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:00 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:32:06 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:32:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:06 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:32:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:32:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:32:14 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:32:14 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:14 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:32:22 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:32:22 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:32:22 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:32:22 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/launched HTTP/1.1" 200 0
2025-02-14 22:32:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:32:22 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/launched HTTP/1.1" 200 0
2025-02-14 22:32:36 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [10595]
2025-02-14 22:32:36 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-14 22:32:36 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:259502]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:259502]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:259502]
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:259502]
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:33:18 [ERROR] src.web_app: 处理语音消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:33:18 [INFO] __main__: [Gradio-Err] 2025-02-14 22:33:18 [ERROR] src.web_app: 处理语音消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:33:44 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-02-14 22:33:44 [INFO] __main__: 正在清理资源...
2025-02-14 22:33:44 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:33:44 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-14 22:33:44 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:33:44 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:33:44 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:36:31 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:36:31 [INFO] __main__: 正在启动服务...
2025-02-14 22:36:31 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:36:31 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:36:31 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:36:31 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:36:31 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:36:31 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [11372] using StatReload
2025-02-14 22:36:32 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:36:32 [INFO] __main__: [Gradio-Err] 2025-02-14 22:36:32 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:36:38 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:36:38 [INFO] __main__: [Gradio-Err] 2025-02-14 22:36:38 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:36:39 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:36:39 [INFO] __main__: [Gradio-Err] 2025-02-14 22:36:39 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:36:44 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:36:44 [INFO] __main__: [Gradio-Err] 2025-02-14 22:36:44 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] yield
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 236, in handle_request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] resp = self._pool.handle_request(req)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] raise exc from None
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] response = connection.handle_request(
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http_proxy.py", line 316, in handle_request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] stream = stream.start_tls(**kwargs)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 376, in start_tls
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] return self._stream.start_tls(ssl_context, server_hostname, timeout)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_backends/sync.py", line 154, in start_tls
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] with map_exceptions(exc_map):
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] self.gen.throw(value)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] raise to_exc(exc) from exc
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] httpcore.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] The above exception was the direct cause of the following exception:
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "<string>", line 14, in <module>
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 30, in __init__
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] self.ai_client = AIServiceClient()
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 36, in __init__
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] self.food_client = Client(
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 180, in __init__
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] self._info = self._get_api_info()
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 565, in _get_api_info
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] r = httpx.get(
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 210, in get
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] return request(
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 118, in request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] return client.request(
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 837, in request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] return self.send(request, auth=auth, follow_redirects=follow_redirects)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 926, in send
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] response = self._send_handling_auth(
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 954, in _send_handling_auth
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] response = self._send_handling_redirects(
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] response = self._send_single_request(request)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 1027, in _send_single_request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] response = transport.handle_request(request)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 235, in handle_request
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] with map_httpcore_exceptions():
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] self.gen.throw(value)
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] raise mapped_exc(message) from exc
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Err] httpx.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:36:51 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:36:51 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:36:51 [INFO] __main__: 正在清理资源...
2025-02-14 22:36:51 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:36:56 [WARNING] __main__: FastAPI 服务未能在5秒内关闭，强制结束
2025-02-14 22:36:56 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:36:56 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:36:56 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:37:05 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:37:05 [INFO] __main__: 正在启动服务...
2025-02-14 22:37:05 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:37:05 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:37:05 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:37:05 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:37:05 [INFO] __main__: [FastAPI-Err] ERROR:    [Errno 48] Address already in use
2025-02-14 22:37:06 [ERROR] __main__: FastAPI 服务意外退出
2025-02-14 22:37:06 [INFO] __main__: 正在清理资源...
2025-02-14 22:37:06 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:37:06 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:37:06 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:37:06 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:37:30 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:37:30 [INFO] __main__: 正在启动服务...
2025-02-14 22:37:30 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:37:30 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:37:30 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:37:30 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:37:30 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:37:30 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [11784] using StatReload
2025-02-14 22:37:31 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:37:31 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:31 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:37:38 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:37:38 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:38 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:37:39 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:37:39 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:39 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:37:43 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:37:43 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:43 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:37:48 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:37:48 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:48 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:37:48 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:37:48 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:37:48 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:48 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:37:48 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:48 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:37:48 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:37:48 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:48 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:37:49 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:37:49 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:49 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:37:49 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:37:49 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:37:49 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/launched HTTP/1.1" 200 0
2025-02-14 22:37:49 [INFO] __main__: [Gradio-Err] 2025-02-14 22:37:49 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/launched HTTP/1.1" 200 0
2025-02-14 22:38:03 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [11787]
2025-02-14 22:38:03 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-14 22:38:03 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-14 22:38:46 [ERROR] src.web_app: 处理文本消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:38:46 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:46 [ERROR] src.web_app: 处理文本消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:38:56 [ERROR] src.services.error_service: 发生错误: TypeError - argument of type 'coroutine' is not iterable
2025-02-14 22:38:56 [DEBUG] src.services.error_service: 错误详情: {'timestamp': '2025-02-14T22:38:56.308163', 'type': 'TypeError', 'message': "argument of type 'coroutine' is not iterable", 'traceback': 'Traceback (most recent call last):\n  File "/Users/txin/food_journey_backend/src/services/user_service.py", line 30, in get_or_create_user_profile\n    return UserProfileModel.from_dict(cached_profile)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/txin/food_journey_backend/src/models/user.py", line 117, in from_dict\n    if "birth_date" in data and isinstance(data["birth_date"], str):\n       ^^^^^^^^^^^^^^^^^^^^\nTypeError: argument of type \'coroutine\' is not iterable\n', 'context': {'function': 'get_or_create_user_profile', 'user_id': 'test_user'}}
2025-02-14 22:38:56 [ERROR] src.web_app: 处理语音消息失败: argument of type 'coroutine' is not iterable
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [ERROR] src.services.error_service: 发生错误: TypeError - argument of type 'coroutine' is not iterable
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [DEBUG] src.services.error_service: 错误详情: {'timestamp': '2025-02-14T22:38:56.308163', 'type': 'TypeError', 'message': "argument of type 'coroutine' is not iterable", 'traceback': 'Traceback (most recent call last):\n  File "/Users/txin/food_journey_backend/src/services/user_service.py", line 30, in get_or_create_user_profile\n    return UserProfileModel.from_dict(cached_profile)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/txin/food_journey_backend/src/models/user.py", line 117, in from_dict\n    if "birth_date" in data and isinstance(data["birth_date"], str):\n       ^^^^^^^^^^^^^^^^^^^^\nTypeError: argument of type \'coroutine\' is not iterable\n', 'context': {'function': 'get_or_create_user_profile', 'user_id': 'test_user'}}
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] 2025-02-14 22:38:56 [ERROR] src.web_app: 处理语音消息失败: argument of type 'coroutine' is not iterable
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] /Users/txin/food_journey_backend/src/web_app.py:170: RuntimeWarning: coroutine 'CacheService.get' was never awaited
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] yield history
2025-02-14 22:38:56 [INFO] __main__: [Gradio-Err] RuntimeWarning: Enable tracemalloc to get the object allocation traceback
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:113]
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_field with data[115:127]
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_value with data[129:139]
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:113]
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_field with data[115:127]
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_value with data[129:139]
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_data with data[143:278528]
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_data with data[143:278528]
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_data with data[0:17126]
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_data with data[0:17126]
2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:39:07 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:07 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:39:09 [ERROR] src.web_app: 处理图片消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:39:09 [INFO] __main__: [Gradio-Err] 2025-02-14 22:39:09 [ERROR] src.web_app: 处理图片消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:41:01 [INFO] __main__: [FastAPI-Err] WARNING:  StatReload detected changes in 'src/web_app.py'. Reloading...
2025-02-14 22:41:01 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-14 22:41:01 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application shutdown.
2025-02-14 22:41:01 [INFO] __main__: [FastAPI-Err] INFO:     Application shutdown complete.
2025-02-14 22:41:01 [INFO] __main__: [FastAPI-Err] INFO:     Finished server process [11787]
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-2:
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] self.run()
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] return future.result()
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] config.load()
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 29, in <module>
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] self.chat_client = Client(
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Err] ValueError: Could not fetch config for https://50dab7c46d18f888a4.gradio.live/
2025-02-14 22:41:05 [INFO] __main__: [FastAPI-Out] Loaded as API: https://50dab7c46d18f888a4.gradio.live/ ✔
2025-02-14 22:41:11 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-02-14 22:41:11 [INFO] __main__: 正在清理资源...
2025-02-14 22:41:11 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:41:11 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [11784]
2025-02-14 22:41:11 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:41:11 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:41:11 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:41:51 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:41:51 [INFO] __main__: 正在启动服务...
2025-02-14 22:41:51 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:41:51 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:41:51 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:41:51 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:41:51 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:41:51 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [14560] using StatReload
2025-02-14 22:41:53 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:41:53 [INFO] __main__: [Gradio-Err] 2025-02-14 22:41:53 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] self.run()
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] return future.result()
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] config.load()
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 29, in <module>
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] self.chat_client = Client(
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:41:54 [INFO] __main__: [FastAPI-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 72, in map_httpcore_exceptions
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] yield
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 236, in handle_request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] resp = self._pool.handle_request(req)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] raise exc from None
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] response = connection.handle_request(
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http_proxy.py", line 316, in handle_request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] stream = stream.start_tls(**kwargs)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_sync/http11.py", line 376, in start_tls
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] return self._stream.start_tls(ssl_context, server_hostname, timeout)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_backends/sync.py", line 154, in start_tls
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] with map_exceptions(exc_map):
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] self.gen.throw(value)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] raise to_exc(exc) from exc
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] httpcore.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] The above exception was the direct cause of the following exception:
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "<string>", line 14, in <module>
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 30, in __init__
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] self.ai_client = AIServiceClient()
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] self.chat_client = Client(
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] self.config = self._get_config()
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 860, in _get_config
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] r = httpx.get(
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 210, in get
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] return request(
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_api.py", line 118, in request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] return client.request(
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 837, in request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] return self.send(request, auth=auth, follow_redirects=follow_redirects)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 926, in send
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] response = self._send_handling_auth(
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 954, in _send_handling_auth
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] response = self._send_handling_redirects(
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 991, in _send_handling_redirects
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] response = self._send_single_request(request)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_client.py", line 1027, in _send_single_request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] response = transport.handle_request(request)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 235, in handle_request
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] with map_httpcore_exceptions():
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/contextlib.py", line 158, in __exit__
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] self.gen.throw(value)
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/httpx/_transports/default.py", line 89, in map_httpcore_exceptions
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] raise mapped_exc(message) from exc
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Err] httpx.ConnectTimeout: _ssl.c:983: The handshake operation timed out
2025-02-14 22:41:58 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:41:58 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:41:58 [INFO] __main__: 正在清理资源...
2025-02-14 22:41:58 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:41:58 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [14560]
2025-02-14 22:41:58 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:41:58 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:41:58 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:42:07 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:07 [INFO] __main__: 正在启动服务...
2025-02-14 22:42:07 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:42:07 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:42:07 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:42:07 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:42:07 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:42:07 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [14775] using StatReload
2025-02-14 22:42:08 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:08 [INFO] __main__: [Gradio-Err] 2025-02-14 22:42:08 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] self.run()
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] return future.result()
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] config.load()
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 29, in <module>
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] self.chat_client = Client(
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:42:11 [INFO] __main__: [FastAPI-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] File "<string>", line 14, in <module>
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 30, in __init__
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] self.ai_client = AIServiceClient()
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] self.chat_client = Client(
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] ^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] self.config = self._get_config()
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:42:11 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:42:12 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:42:12 [INFO] __main__: 正在清理资源...
2025-02-14 22:42:12 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:42:12 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [14775]
2025-02-14 22:42:12 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:42:12 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:42:12 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:42:20 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:20 [INFO] __main__: 正在启动服务...
2025-02-14 22:42:20 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:42:20 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:42:20 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:42:20 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:42:20 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:42:20 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [14968] using StatReload
2025-02-14 22:42:22 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:22 [INFO] __main__: [Gradio-Err] 2025-02-14 22:42:22 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] self.run()
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] return future.result()
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] config.load()
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 29, in <module>
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] self.chat_client = Client(
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:42:24 [INFO] __main__: [FastAPI-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] File "<string>", line 14, in <module>
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 30, in __init__
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] self.ai_client = AIServiceClient()
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] self.chat_client = Client(
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] ^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] self.config = self._get_config()
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:42:24 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:42:25 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:42:25 [INFO] __main__: 正在清理资源...
2025-02-14 22:42:25 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:42:25 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [14968]
2025-02-14 22:42:25 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:42:25 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:42:25 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:42:35 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:35 [INFO] __main__: 正在启动服务...
2025-02-14 22:42:35 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:42:35 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:42:35 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:42:35 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:42:35 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:42:35 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [15201] using StatReload
2025-02-14 22:42:36 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:36 [INFO] __main__: [Gradio-Err] 2025-02-14 22:42:36 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] Process SpawnProcess-1:
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] Traceback (most recent call last):
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] self.run()
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/multiprocessing/process.py", line 108, in run
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] self._target(*self._args, **self._kwargs)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] target(sockets=sockets)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 66, in run
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] return asyncio.run(self.serve(sockets=sockets))
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 194, in run
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] return runner.run(main)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/runners.py", line 118, in run
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] return self._loop.run_until_complete(task)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/asyncio/base_events.py", line 687, in run_until_complete
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] return future.result()
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 70, in serve
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] await self._serve(sockets)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/server.py", line 77, in _serve
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] config.load()
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/config.py", line 435, in load
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] self.loaded_app = import_from_string(self.app)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] module = importlib.import_module(module_str)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.pyenv/versions/3.12.7/lib/python3.12/importlib/__init__.py", line 90, in import_module
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] return _bootstrap._gcd_import(name[level:], package, level)
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1387, in _gcd_import
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1360, in _find_and_load
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 1331, in _find_and_load_unlocked
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 935, in _load_unlocked
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap_external>", line 995, in exec_module
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "<frozen importlib._bootstrap>", line 488, in _call_with_frames_removed
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/main.py", line 37, in <module>
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] from .routers import auth, profile, chat, workout, recipes, favorites
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/routers/chat.py", line 29, in <module>
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ai_client = AIServiceClient()
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] self.chat_client = Client(
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] self.config = self._get_config()
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:42:39 [INFO] __main__: [FastAPI-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] File "<string>", line 14, in <module>
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 30, in __init__
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] self.ai_client = AIServiceClient()
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] self.chat_client = Client(
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] ^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] self.config = self._get_config()
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:42:39 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:42:40 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:42:40 [INFO] __main__: 正在清理资源...
2025-02-14 22:42:40 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:42:40 [INFO] __main__: [FastAPI-Err] INFO:     Stopping reloader process [15201]
2025-02-14 22:42:40 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:42:40 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:42:40 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:44:31 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:44:31 [INFO] __main__: 正在启动服务...
2025-02-14 22:44:31 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:44:31 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:44:31 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:44:31 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:44:31 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:44:31 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [18218] using StatReload
2025-02-14 22:44:32 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:44:32 [INFO] __main__: [Gradio-Err] 2025-02-14 22:44:32 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] Traceback (most recent call last):
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] File "<string>", line 14, in <module>
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/web_app.py", line 30, in __init__
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] self.ai_client = AIServiceClient()
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] File "/Users/txin/food_journey_backend/src/services/ai_service_client.py", line 30, in __init__
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] self.chat_client = Client(
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] ^^^^^^^
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 153, in __init__
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] self.config = self._get_config()
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] ^^^^^^^^^^^^^^^^^^
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] File "/Users/txin/.food_journey_env/lib/python3.12/site-packages/gradio_client/client.py", line 886, in _get_config
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] raise ValueError(f"Could not fetch config for {self.src}")
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Err] ValueError: Could not fetch config for https://d7cd8f5f2f065efa18.gradio.live/
2025-02-14 22:44:37 [INFO] __main__: [Gradio-Out] Loaded as API: https://d7cd8f5f2f065efa18.gradio.live/ ✔
2025-02-14 22:44:37 [ERROR] __main__: Gradio 服务意外退出
2025-02-14 22:44:37 [INFO] __main__: 正在清理资源...
2025-02-14 22:44:37 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:44:38 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:44:38 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:44:38 [INFO] __main__: Gradio 服务已关闭
2025-02-14 22:48:53 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:48:53 [INFO] __main__: 正在启动服务...
2025-02-14 22:48:53 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-14 22:48:53 [INFO] __main__: FastAPI服务已启动
2025-02-14 22:48:53 [INFO] __main__: Gradio 服务已启动 - http://localhost:7860
2025-02-14 22:48:53 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-14 22:48:53 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-14 22:48:53 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [22468] using StatReload
2025-02-14 22:48:54 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:48:54 [INFO] __main__: [Gradio-Err] 2025-02-14 22:48:54 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-14.log, 控制台: True
2025-02-14 22:48:58 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:48:58 [INFO] __main__: [Gradio-Err] 2025-02-14 22:48:58 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:48:58 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:48:58 [INFO] __main__: [Gradio-Err] 2025-02-14 22:48:58 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:49:02 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:49:02 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:02 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:49:06 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [INFO] root: AI服务客户端初始化成功
2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:49:06 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:49:06 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [WARNING] src.web_app: SSL证书文件不存在或未配置，将使用HTTP模式
2025-02-14 22:49:06 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [DEBUG] asyncio: Using selector: KqueueSelector
2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/py_client/initiated HTTP/1.1" 200 0
2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: Starting new HTTPS connection (1): huggingface.co:443
2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/initiated HTTP/1.1" 200 0
2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/launched HTTP/1.1" 200 0
2025-02-14 22:49:06 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:06 [DEBUG] urllib3.connectionpool: https://huggingface.co:443 "HEAD /api/telemetry/gradio/launched HTTP/1.1" 200 0
2025-02-14 22:49:20 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [22472]
2025-02-14 22:49:20 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-14 22:49:20 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-14 22:49:28 [ERROR] src.web_app: 处理文本消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:49:28 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:28 [ERROR] src.web_app: 处理文本消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_begin with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[42:61]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[63:108]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_field with data[110:122]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_value with data[124:148]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_header_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_headers_finished with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_data with data[152:185414]
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_part_end with no data
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [DEBUG] python_multipart.multipart: Calling on_end with no data
2025-02-14 22:49:34 [ERROR] src.web_app: 处理语音消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:49:34 [INFO] __main__: [Gradio-Err] 2025-02-14 22:49:34 [ERROR] src.web_app: 处理语音消息失败: 'UserService' object has no attribute 'get_user_profile'
2025-02-14 22:51:12 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-02-14 22:51:12 [INFO] __main__: 正在清理资源...
2025-02-14 22:51:12 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-14 22:51:12 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-14 22:51:12 [INFO] __main__: FastAPI 服务已关闭
2025-02-14 22:51:12 [INFO] __main__: 正在关闭 Gradio 服务...
2025-02-14 22:51:12 [INFO] __main__: Gradio 服务已关闭
