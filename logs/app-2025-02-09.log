2025-02-09 12:26:15 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-09.log, 控制台: True
2025-02-09 12:26:15 [INFO] __main__: 正在启动服务...
2025-02-09 12:26:15 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-09 12:26:15 [INFO] __main__: FastAPI服务已启动
2025-02-09 12:26:15 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-09 12:26:15 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-09 12:26:15 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [51219] using StatReload
2025-02-09 12:26:38 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [51221]
2025-02-09 12:26:38 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-09 12:26:38 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-09 12:27:34 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-02-09 12:27:34 [INFO] __main__: 正在清理资源...
2025-02-09 12:27:34 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-09 12:27:34 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-09 12:27:34 [INFO] __main__: FastAPI 服务已关闭
2025-02-09 17:07:20 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-09.log, 控制台: True
2025-02-09 17:07:20 [INFO] __main__: 正在启动服务...
2025-02-09 17:07:20 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-09 17:07:20 [INFO] __main__: FastAPI服务已启动
2025-02-09 17:07:20 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-09 17:07:20 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-09 17:07:20 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [81799] using StatReload
2025-02-09 17:07:35 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [81801]
2025-02-09 17:07:35 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-09 17:07:35 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-09 17:09:37 [INFO] __main__: [FastAPI-Err] WARNING:  StatReload detected changes in 'main.py'. Reloading...
2025-02-09 17:09:37 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-09 17:09:37 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application shutdown.
2025-02-09 17:09:37 [INFO] __main__: [FastAPI-Err] INFO:     Application shutdown complete.
2025-02-09 17:09:37 [INFO] __main__: [FastAPI-Err] INFO:     Finished server process [81801]
2025-02-09 17:09:51 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [82037]
2025-02-09 17:09:51 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-09 17:09:51 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-09 17:10:01 [INFO] __main__: [FastAPI-Err] WARNING:  StatReload detected changes in 'main.py'. Reloading...
2025-02-09 17:10:01 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-09 17:10:01 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application shutdown.
2025-02-09 17:10:01 [INFO] __main__: [FastAPI-Err] INFO:     Application shutdown complete.
2025-02-09 17:10:01 [INFO] __main__: [FastAPI-Err] INFO:     Finished server process [82037]
2025-02-09 17:10:05 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-02-09 17:10:05 [INFO] __main__: 正在清理资源...
2025-02-09 17:10:05 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-09 17:10:10 [WARNING] __main__: FastAPI 服务未能在5秒内关闭，强制结束
2025-02-09 17:10:10 [INFO] __main__: FastAPI 服务已关闭
2025-02-09 17:10:24 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-09.log, 控制台: True
2025-02-09 17:10:24 [INFO] __main__: 正在启动服务...
2025-02-09 17:10:24 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-09 17:10:24 [INFO] __main__: FastAPI服务已启动
2025-02-09 17:10:24 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-09 17:10:24 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-09 17:10:24 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [82148] using StatReload
2025-02-09 17:10:39 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [82150]
2025-02-09 17:10:39 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-09 17:10:39 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-09 17:11:16 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-02-09 17:11:16 [INFO] __main__: 正在清理资源...
2025-02-09 17:11:16 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-09 17:11:17 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-09 17:11:17 [INFO] __main__: FastAPI 服务已关闭
2025-02-09 17:39:12 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-09.log, 控制台: True
2025-02-09 17:39:12 [INFO] __main__: 正在启动服务...
2025-02-09 17:39:12 [WARNING] __main__: SSL证书文件不存在，将使用HTTP模式启动
2025-02-09 17:39:12 [INFO] __main__: FastAPI服务已启动
2025-02-09 17:39:12 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/Users/txin/food_journey_backend']
2025-02-09 17:39:12 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-09 17:39:12 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [86319] using StatReload
2025-02-09 17:39:39 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [86321]
2025-02-09 17:39:39 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-09 17:39:39 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-09 17:40:33 [INFO] __main__: 收到信号 2，正在优雅关闭...
2025-02-09 17:40:33 [INFO] __main__: 正在清理资源...
2025-02-09 17:40:33 [INFO] __main__: 正在关闭 FastAPI 服务...
2025-02-09 17:40:33 [INFO] __main__: [FastAPI-Err] INFO:     Shutting down
2025-02-09 17:40:33 [INFO] __main__: FastAPI 服务已关闭
2025-02-09 17:49:04 [INFO] root: 日志系统初始化完成 - 级别: DEBUG, 文件: logs/app-2025-02-09.log, 控制台: True
2025-02-09 17:49:04 [INFO] __main__: 正在启动服务...
2025-02-09 17:49:04 [INFO] __main__: FastAPI服务已启动
2025-02-09 17:49:04 [INFO] __main__: [FastAPI-Err] INFO:     Will watch for changes in these directories: ['/root/food_journey']
2025-02-09 17:49:04 [INFO] __main__: [FastAPI-Err] INFO:     Uvicorn running on https://0.0.0.0:8000 (Press CTRL+C to quit)
2025-02-09 17:49:04 [INFO] __main__: [FastAPI-Err] INFO:     Started reloader process [202968] using StatReload
2025-02-09 17:49:30 [INFO] __main__: [FastAPI-Err] INFO:     Started server process [202972]
2025-02-09 17:49:30 [INFO] __main__: [FastAPI-Err] INFO:     Waiting for application startup.
2025-02-09 17:49:30 [INFO] __main__: [FastAPI-Err] INFO:     Application startup complete.
2025-02-09 17:49:57 [INFO] __main__: [FastAPI-Out] Loaded as API: https://1ba902d825722a9416.gradio.live/ ✔
2025-02-09 17:49:57 [INFO] __main__: [FastAPI-Out] Loaded as API: https://1ba902d825722a9416.gradio.live/ ✔
2025-02-09 17:49:57 [INFO] __main__: [FastAPI-Out] Loaded as API: https://1ba902d825722a9416.gradio.live/ ✔
2025-02-09 17:49:57 [INFO] __main__: [FastAPI-Out] Loaded as API: https://1ba902d825722a9416.gradio.live/ ✔
2025-02-09 17:49:57 [INFO] __main__: [FastAPI-Out] Loaded as API: https://1ba902d825722a9416.gradio.live/ ✔
2025-02-09 17:49:57 [INFO] __main__: [FastAPI-Out] Loaded as API: https://1ba902d825722a9416.gradio.live/ ✔
2025-02-09 17:49:57 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:50654 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 18:57:30 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 18:57:30 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 18:57:30 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:53771 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:04:55 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:04:55 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:04:55 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:52663 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:05:05 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:52747 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:05:50 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:53048 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:07:48 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:07:48 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:07:48 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:54096 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:07:56 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:54159 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:08:46 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:08:46 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:08:46 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:50488 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:08:50 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:50488 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:10:59 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:10:59 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:10:59 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:51393 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:11:02 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:51393 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:12:53 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:12:53 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:12:53 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:52090 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:12:56 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:52090 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:13:24 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:52383 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:16:06 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:53404 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:22:41 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:22:41 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:22:41 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:51716 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:26:40 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:开始获取用户资料: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:26:40 [INFO] __main__: [FastAPI-Err] INFO:src.routers.auth:获取用户资料成功: user_id=343f56bb-2267-4124-b023-287b00b4f2fd
2025-02-09 19:26:40 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:54059 - "GET /api/v1/auth/profile HTTP/1.1" 200 OK
2025-02-09 19:26:47 [INFO] __main__: [FastAPI-Out] INFO:     124.79.135.20:54103 - "POST /api/v1/chat/stream HTTP/1.1" 200 OK
2025-02-09 19:46:13 [INFO] __main__: [FastAPI-Out] INFO:     111.7.96.150:59992 - "GET / HTTP/1.1" 500 Internal Server Error
2025-02-09 19:50:02 [INFO] __main__: [FastAPI-Out] INFO:     36.41.66.127:45584 - "GET / HTTP/1.1" 500 Internal Server Error
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] ERROR:sqlalchemy.pool.impl.AsyncAdaptedQueuePool:The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b16c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] /root/food_journey/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py:344: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b16c0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] return ".".join([x for x in (module, qualname) if x])
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] ERROR:sqlalchemy.pool.impl.AsyncAdaptedQueuePool:The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b1d50>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] /root/food_journey/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py:344: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b1d50>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] return ".".join([x for x in (module, qualname) if x])
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] ERROR:sqlalchemy.pool.impl.AsyncAdaptedQueuePool:The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b2200>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] /root/food_journey/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py:344: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b2200>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] return ".".join([x for x in (module, qualname) if x])
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] ERROR:sqlalchemy.pool.impl.AsyncAdaptedQueuePool:The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b27a0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] /root/food_journey/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py:344: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b27a0>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] return ".".join([x for x in (module, qualname) if x])
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] ERROR:sqlalchemy.pool.impl.AsyncAdaptedQueuePool:The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b2a70>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] /root/food_journey/.venv/lib/python3.10/site-packages/anyio/_backends/_asyncio.py:344: SAWarning: The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <asyncpg.connection.Connection object at 0x7f7b2a5b2a70>>, which will be terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Err] return ".".join([x for x in (module, qualname) if x])
2025-02-09 19:51:35 [INFO] __main__: [FastAPI-Out] INFO:     113.141.85.182:54826 - "GET / HTTP/1.1" 500 Internal Server Error
2025-02-09 19:54:46 [INFO] __main__: [FastAPI-Out] INFO:     113.141.86.22:37132 - "GET / HTTP/1.1" 500 Internal Server Error
